(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{117:function(e,t,c){},118:function(e,t,c){},142:function(e,t,c){},143:function(e,t,c){},144:function(e,t,c){},176:function(e,t,c){},177:function(e,t,c){},178:function(e,t,c){"use strict";c.r(t);var a=c(1),n=c(0),s=c(11),r=c.n(s),i=(c(117),c(118),c(119),c(19)),l=c(12),o=c(7),j=c(13),d=c.n(j),u=c(14),b=function(e){var t=Object(n.useState)({username:"",email:"",password:"",confirmPassword:""}),c=Object(o.a)(t,2),s=c[0],r=c[1],j=Object(n.useState)({}),b=Object(o.a)(j,2),m=b[0],h=b[1],O=function(e){r(Object(l.a)(Object(l.a)({},s),{},Object(i.a)({},e.target.name,e.target.value)))};return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("form",{style:{textAlign:"center",margin:"auto"},onSubmit:function(e){e.preventDefault(),d.a.post("http://localhost:8000/api/users/register",s,{withCredentials:!0}).then((function(e){console.log(e.data),e.data.errors?h(e.data.errors):(console.log("register successfully"),localStorage.setItem("loggedin",e.data._id),Object(u.d)("/"))})).catch((function(e){return console.log("Error: "+e)}))},children:[Object(a.jsxs)("div",{className:"form-group col-8",children:[Object(a.jsx)("label",{htmlFor:"username",children:"Username: "}),Object(a.jsx)("input",{type:"text",className:"form-control",name:"username",value:s.username,onChange:O}),m.username&&Object(a.jsx)("small",{className:"text-danger",children:m.username.message})]}),Object(a.jsxs)("div",{className:"form-group col-8",children:[Object(a.jsx)("label",{htmlFor:"email",children:"Email: "}),Object(a.jsx)("input",{type:"text",className:"form-control",name:"email",value:s.email,onChange:O}),m.email&&Object(a.jsx)("small",{className:"text-danger",children:m.email.message})]}),Object(a.jsxs)("div",{className:"form-group col-8",children:[Object(a.jsx)("label",{htmlFor:"password",children:"Password: "}),Object(a.jsx)("input",{type:"text",className:"form-control",name:"password",value:s.password,onChange:O}),m.password&&Object(a.jsx)("small",{className:"text-danger",children:m.password.message})]}),Object(a.jsxs)("div",{className:"form-group col-8",children:[Object(a.jsx)("label",{htmlFor:"confirmPassword",children:"Confirm Password: "}),Object(a.jsx)("input",{type:"text",className:"form-control",name:"confirmPassword",value:s.confirmPassword,onChange:O}),m.confirmPassword&&Object(a.jsx)("small",{className:"text-danger",children:m.confirmPassword.message})]}),Object(a.jsx)("div",{className:"form-group col-8",children:Object(a.jsx)("input",{className:"btn btn-primary",type:"submit",value:"Register"})})]})})},m=Object(n.createContext)(),h=function(e){var t=Object(n.useContext)(m),c=Object(n.useState)({email:"",password:""}),s=Object(o.a)(c,2),r=s[0],j=s[1],d=function(e){j(Object(l.a)(Object(l.a)({},r),{},Object(i.a)({},e.target.name,e.target.value)))};return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("form",{style:{textAlign:"center",margin:"auto"},className:"form-group",onSubmit:function(e){e.preventDefault(),t.login(r)},children:[Object(a.jsxs)("div",{className:"form-group col-8",children:[Object(a.jsx)("label",{htmlFor:"email",children:"Email: "}),Object(a.jsx)("input",{type:"text",className:"form-control",name:"email",onChange:d})]}),Object(a.jsxs)("div",{className:"form-group col-8",children:[Object(a.jsx)("label",{htmlFor:"password",children:"Password: "}),Object(a.jsx)("input",{type:"text",className:"form-control",name:"password",onChange:d})]}),Object(a.jsx)("div",{className:"form-group col-8",children:t.err.emailLogin&&Object(a.jsx)("small",{className:"text-danger",children:t.err.emailLogin.message})}),Object(a.jsx)("div",{className:"form-group col-8",children:Object(a.jsx)("input",{className:"btn btn-success",type:"submit",value:"Log in"})})]})})},O=function(e){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(b,{}),Object(a.jsx)(h,{})]})},x=c(46),p=c(216),f=function(e){var t=Object(n.useContext)(m);return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(p.a,{variant:"contained",color:"secondary",onClick:function(e){t.logout()},children:"Log out"})})},g=c(230),v=c(221),N=c(220),w=c(219),C=c(26),S=c(228);function y(e){var t=Object(n.useState)(e.initialState),c=Object(o.a)(t,2),s=c[0],r=c[1],j=function(e){r(Object(l.a)(Object(l.a)({},s),{},Object(i.a)({},e.target.name,e.target.value)))};return Object(a.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e.callBack(s),e.handleClose()},children:[Object(a.jsxs)("div",{children:[Object(a.jsx)(S.a,{autoFocus:!0,margin:"dense",name:"title",label:"Title",type:"text",value:s.title,onChange:j}),Object(a.jsx)("span",{className:"col-sm-2",children:" "}),Object(a.jsx)(S.a,{margin:"dense",name:"enddate",label:"Auction End Time",type:"datetime-local",defaultValue:"2020-12-31T10:30",onChange:j}),Object(a.jsx)("span",{className:"col-sm-2",children:" "}),Object(a.jsx)(S.a,{margin:"dense",name:"startBid",label:"Starting Bid ($US Dollar)",type:"text",value:s.startBid,onChange:j}),Object(a.jsx)("span",{className:"col-sm-2",children:" "}),Object(a.jsx)(S.a,{margin:"dense",name:"eachBid",label:"Bid Increment($US Dollar)",type:"text",value:s.increment,onChange:j})]}),Object(a.jsx)(S.a,{margin:"dense",name:"image",label:"Image URL",type:"text",value:s.image,onChange:j,fullWidth:!0}),Object(a.jsx)(S.a,{margin:"dense",name:"desc",label:"Description",type:"text",value:s.desc,onChange:j,fullWidth:!0}),Object(a.jsxs)("div",{style:{padding:"15px 15px 15px 0"},children:[Object(a.jsx)(p.a,{type:"submit",variant:"contained",color:"primary",children:e.btn}),Object(a.jsx)("span",{className:"col-sm-2",children:" "}),Object(a.jsx)(p.a,{onClick:e.handleClose,variant:"contained",color:"secondary",children:"Cancle"})]})]})}function B(e){var t=Object(n.useState)(!1),c=Object(o.a)(t,2),s=c[0],r=c[1],i=Object(C.a)(),l=Object(w.a)(i.breakpoints.down("sm")),j=function(){r(!1)};return Object(a.jsxs)("div",{children:[Object(a.jsx)(p.a,{variant:"contained",color:"primary",onClick:function(){r(!0)},children:e.action}),Object(a.jsxs)(g.a,{fullScreen:l,open:s,onClose:j,"aria-labelledby":"responsive-dialog-title",children:[Object(a.jsx)(N.a,{id:"responsive-dialog-title",children:e.modalTitle}),Object(a.jsx)(v.a,{children:Object(a.jsx)(y,{initialState:e.initialState,callBack:e.callBack,handleClose:j,btn:e.create?"Add Product":"Update Product"})})]})]})}var F=c(222),E=c(223),D=c(224),P=c(227),R=c(226),k=c(225),T=c(181),L=Object(F.a)({root:{maxWidth:345,maxHeight:450,padding:"10px"}});function I(e){var t=L();return Object(a.jsxs)(E.a,{onClick:function(){return Object(u.d)("/products/"+e.product._id)},className:t.root,children:[Object(a.jsxs)(D.a,{children:[Object(a.jsx)(k.a,{component:"img",alt:e.product.title,height:"300",image:e.product.image,title:e.product.title}),Object(a.jsx)(R.a,{children:Object(a.jsx)(T.a,{gutterBottom:!0,variant:"body2",component:"h2",children:e.product.title})})]}),Object(a.jsx)(P.a,{children:Object(a.jsx)(p.a,{onClick:function(){return Object(u.d)("/products/"+e.product._id)},size:"small",color:"primary",children:"active"===e.active?"Learn More and Bid":"Learn More (Bid Ended)"})})]})}c(142);var A=function(e){var t=Object(n.useState)((function(){return localStorage.getItem("loggedin")})),c=Object(o.a)(t,1)[0],s={title:"",startBid:0,eachBid:1,price:0,image:"",desc:"",rating:0,numReviews:0,user_id:c},r=Object(n.useState)(!0),i=Object(o.a)(r,1)[0],l=Object(n.useState)([]),j=Object(o.a)(l,2),b=j[0],m=j[1],h=Object(n.useState)([]),O=Object(o.a)(h,2),p=O[0],g=O[1];Object(n.useEffect)((function(){d.a.get("http://localhost:8000/api/products/active",{withCredentials:!0}).then((function(e){m(e.data)})).catch((function(e){return console.log(e)})),d.a.get("http://localhost:8000/api/products/past",{withCredentials:!0}).then((function(e){g(e.data)})).catch((function(e){return console.log(e)}))}),[]);return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"welcome-header",children:c?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(B,{action:"Add your item",modalTitle:"New Product",create:i,callBack:function(e){d.a.post("http://localhost:8000/api/products/new",e,{withCredentials:!0}).then((function(t){new Date(e.enddate)>=Date.now()?m([].concat(Object(x.a)(b),[t.data])):g([].concat(Object(x.a)(p),[t.data]))})).catch((function(e){return console.log("Error "+e)}))},initialState:s}),Object(a.jsx)(f,{})]}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h2",{children:"Welcome to RealTimeBid!"}),Object(a.jsx)("div",{children:Object(a.jsx)(u.a,{className:"btn btn-info",to:"/reg",children:"Register or Log in to bid now!!"})})]})}),Object(a.jsx)("h3",{children:"Active Items"}),Object(a.jsx)("div",{className:"list-grid",children:b.map((function(e,t){return Object(a.jsx)("div",{className:"each-item",children:Object(a.jsx)(I,{active:"active",product:e},t)})}))}),Object(a.jsx)("h3",{children:"Bid Ended"}),Object(a.jsx)("div",{className:"list-grid",children:p.map((function(e,t){return Object(a.jsx)("div",{className:"each-item",children:Object(a.jsx)(I,{active:"non-active",product:e},t)})}))})]})},_=function(e){var t=Object(n.useState)({}),c=Object(o.a)(t,2),s=c[0],r=c[1];return Object(a.jsx)(m.Provider,{value:{err:s,login:function(e){d.a.post("http://localhost:8000/api/login",e,{withCredentials:!0}).then((function(e){e.data.errors?r(e.data.errors):(console.log("Logged in succefully"),localStorage.setItem("loggedin",e.data._id),Object(u.d)("/"))})).catch((function(e){return console.log("Error: "+e)}))},logout:function(e){d.a.get("http://localhost:8000/api/logout",{withCredentials:!0}).then((function(e){localStorage.clear(),Object(u.d)("/")})).catch((function(e){return console.log("Error: "+e)}))}},children:e.children})},U=(c(143),function(e){var t=0;e.product.numReviews&&0!==e.product.numReviews?t=100-e.product.rating/e.product.numReviews*20:e.product.numReviews||(t=100-20*e.product.rating);var c={clipPath:0===e.product.numReviews?"inset(0 100% 0 0)":"inset(0 ".concat(t,"% 0 0)")};return Object(a.jsx)("div",{className:"rating",children:Object(a.jsxs)("div",{className:"star",children:[Object(a.jsx)("i",{className:"far fa-star"}),Object(a.jsx)("i",{className:"far fa-star"}),Object(a.jsx)("i",{className:"far fa-star"}),Object(a.jsx)("i",{className:"far fa-star"}),Object(a.jsx)("i",{className:"far fa-star"}),Object(a.jsxs)("div",{className:"star-1",style:c,children:[Object(a.jsx)("i",{className:"fas fa-star"}),Object(a.jsx)("i",{className:"fas fa-star"}),Object(a.jsx)("i",{className:"fas fa-star"}),Object(a.jsx)("i",{className:"fas fa-star"}),Object(a.jsx)("i",{className:"fas fa-star"})]})]})})}),W=(c(144),function(e){var t=Object(n.useState)({product_id:e.productId,_creator:e.user,content:"",rating:0,createdAt:""}),c=Object(o.a)(t,2),s=c[0],r=c[1],j=function(e){r(Object(l.a)(Object(l.a)({},s),{},Object(i.a)({},e.target.name,e.target.value)))};return Object(a.jsx)("div",{style:{margin:"15px 0"},children:Object(a.jsxs)("form",{onSubmit:function(t){t.preventDefault();var c=(new Date).toISOString();r(Object(l.a)(Object(l.a)({},s),{},{createdAt:c})),e.callBack(s),r(Object(l.a)(Object(l.a)({},s),{},{content:""}))},children:[Object(a.jsx)("span",{children:"Rate this item:"}),Object(a.jsxs)("div",{className:"reviews",children:[Object(a.jsx)("input",{type:"radio",name:"rating",id:"rd-5",value:5,onChange:j}),Object(a.jsx)("label",{htmlFor:"rd-5",className:"fas fa-star"}),Object(a.jsx)("input",{type:"radio",name:"rating",id:"rd-4",value:4,onChange:j}),Object(a.jsx)("label",{htmlFor:"rd-4",className:"fas fa-star"}),Object(a.jsx)("input",{type:"radio",name:"rating",id:"rd-3",value:3,onChange:j}),Object(a.jsx)("label",{htmlFor:"rd-3",className:"fas fa-star"}),Object(a.jsx)("input",{type:"radio",name:"rating",id:"rd-2",value:2,onChange:j}),Object(a.jsx)("label",{htmlFor:"rd-2",className:"fas fa-star"}),Object(a.jsx)("input",{type:"radio",name:"rating",id:"rd-1",value:1,onChange:j}),Object(a.jsx)("label",{htmlFor:"rd-1",className:"fas fa-star"})]}),Object(a.jsx)("div",{className:"text-field",children:Object(a.jsx)(S.a,{required:!0,id:"standard-multiline-flexible",label:"Required",name:"content",multiline:!0,fullWidth:!0,rows:4,placeholder:"Enter your comment",variant:"outlined",value:s.content,onChange:j})}),Object(a.jsx)("div",{className:"button",children:Object(a.jsx)(p.a,{type:"submit",variant:"contained",color:"primary",children:e.btn})})]})})}),H=c(99),$=c.n(H),M=c(58),q=c.n(M),J=(c(176),function(e){var t=Object(n.useState)({}),c=Object(o.a)(t,2),s=c[0],r=c[1];Object(n.useEffect)((function(){d.a.get("http://localhost:8000/api/users/"+e.comment._creator).then((function(e){r(e.data)})).catch((function(e){return console.log(e)}))}),[e.comment._creator]);var i=new Date(e.comment.createdAt).toLocaleString("en-US",{dateStyle:"short",timeStyle:"short"});return Object(a.jsxs)("div",{className:"commentHolder",children:[Object(a.jsxs)("div",{className:"commentHeader",children:[Object(a.jsxs)("div",{className:"name-time",children:[Object(a.jsx)("div",{children:null===s?Object(a.jsx)("b",{children:"Deleted user"}):Object(a.jsx)("b",{children:s.username})}),Object(a.jsxs)("div",{children:[Object(a.jsxs)("small",{children:[q()(e.comment.createdAt).fromNow(),", "]}),Object(a.jsxs)("small",{children:[" ",i]})]})]}),Object(a.jsx)("div",{children:0!==e.comment.rating&&Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(U,{product:e.comment})})})]}),Object(a.jsx)("p",{children:e.comment.content})]})}),z=(c(177),function(e){var t=Object(n.useState)({}),c=Object(o.a)(t,2),s=c[0],r=c[1],i=Object(n.useState)({}),j=Object(o.a)(i,2),b=j[0],m=j[1],h=Object(n.useState)([]),O=Object(o.a)(h,2),p=O[0],g=O[1],v=Object(n.useState)((function(){return localStorage.getItem("loggedin")})),N=Object(o.a)(v,1)[0],w=Object(n.useState)(!1),C=Object(o.a)(w,2),S=C[0],y=C[1],B=Object(n.useState)((function(){return $()(":8000")})),F=Object(o.a)(B,1)[0],E=Object(n.useState)(0),D=Object(o.a)(E,2),P=D[0],R=D[1],k=Object(n.useState)(""),T=Object(o.a)(k,2),L=T[0],I=T[1],A=Object(n.useState)(localStorage.getItem("loggedin")),_=Object(o.a)(A,1)[0],H=Object(n.useRef)(null);Object(n.useEffect)((function(){d.a.get("http://localhost:8000/api/users/"+_,{withCredentials:!0}).then((function(e){m(e.data)})).catch((function(e){return console.log("Error: "+e)})),d.a.get("http://localhost:8000/api/products/"+e.id,{withCredentials:!0}).then((function(e){r(e.data)})).catch((function(e){return console.log(e)})),d.a.get("http://localhost:8000/api/comments/"+e.id,{withCredentials:!0}).then((function(e){g(e.data),y(!0)})).catch((function(e){return console.log("Error: "+e)}))}),[e.id,_]),Object(n.useEffect)((function(){return F.on("sendCommentToClient",(function(e){g([].concat(Object(x.a)(p),[e]))})),function(){return F.off("sendCommentToClient")}}),[F,p]);var M=function(){if(S)return!(new Date(s.enddate)<Date.now())};console.log(M());Object(n.useEffect)((function(){return F.on("sendUpdatedProductToClient",(function(e){r(e)})),function(){return F.off("sendUpdatedProductToClient")}}),[F]);return Object(n.useEffect)((function(){H.current&&(H.current.scrollTop=H.current.scrollHeight-H.current.clientHeight)}),[p]),Object(a.jsxs)(a.Fragment,{children:[N?Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:"header",children:[Object(a.jsxs)("h2",{children:["Welcome, ",b.username,"!"]}),Object(a.jsx)(u.a,{className:"text-uppercase",to:"/",children:Object(a.jsx)("p",{children:" Back to item list"})}),Object(a.jsx)(f,{})]})}):Object(a.jsxs)("div",{className:"py-2",children:[Object(a.jsx)(u.a,{className:"btn btn-info",to:"/reg",children:"Register or Log in to bid now!! "}),Object(a.jsx)(u.a,{className:"text-uppercase",to:"/",children:" Back to item list"})]}),Object(a.jsx)("h3",{children:s.title}),Object(a.jsx)("b",{className:"d-inline-block",children:"Rating:"})," ",Object(a.jsx)("div",{className:"d-inline-block",children:Object(a.jsx)(U,{product:s})}),Object(a.jsxs)("p",{children:[s.numReviews," reviews"]}),Object(a.jsxs)("div",{className:"main-content",children:[Object(a.jsx)("div",{className:"left",children:Object(a.jsx)("img",{src:s.image,alt:""})}),Object(a.jsxs)("div",{className:"right",children:[Object(a.jsx)("b",{children:"Description: "}),Object(a.jsx)("p",{children:s.desc})]})]}),Object(a.jsxs)("div",{className:"bid-info",children:[Object(a.jsxs)("div",{className:"price",children:[Object(a.jsxs)("h4",{children:["Current Bid: $ ",Object(a.jsx)("span",{children:s.price})]}),Object(a.jsxs)("h4",{children:["Minimum Bid Increment: $ ",Object(a.jsx)("span",{children:s.eachBid})]})]}),Object(a.jsxs)("div",{className:"time",children:[Object(a.jsxs)("h5",{children:["End Time: ",Object(a.jsx)("span",{children:new Date(s.enddate).toLocaleString("en-US",{dateStyle:"short",timeStyle:"short"})})]}),M()?Object(a.jsxs)("h5",{children:["Time Left: ",Object(a.jsx)("span",{children:q()(s.enddate).from(Date.now(),!0)})]}):Object(a.jsxs)("h5",{children:["Time Left: ",Object(a.jsx)("span",{children:"Bid has ended"})]})]})]}),N&&M()&&Object(a.jsxs)("form",{className:"bid-form",onSubmit:function(t){if(t.preventDefault(),Number(P)<Number(s.eachBid))return I("Your bid cannot be less than the minimum bid increment");var c=Number(s.price)+Number(P),a=Object(l.a)(Object(l.a)({},s),{},{price:c});d.a.put("http://localhost:8000/api/products/"+e.id,a,{withCredentials:!0}).then((function(e){F.emit("updateProductReview",e.data)})).catch((function(e){return console.log("Error: "+e)}))},children:[L&&Object(a.jsx)("p",{children:Object(a.jsx)("small",{className:"text-danger",children:L})}),Object(a.jsx)("input",{className:"form-control col-sm",type:"number",placeholder:"Enter bid",name:"eachBid",onChange:function(e){return R(e.target.value)}}),Object(a.jsx)("button",{type:"submit",className:"btn btn-danger",children:"BID"})]}),Object(a.jsx)("div",{ref:H,className:"chat-window",children:S&&p.map((function(e,t){return Object(a.jsx)("div",{children:e.content.length>0&&Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(J,{comment:e})})},t)}))}),N&&S&&M()&&Object(a.jsx)(W,{productId:s._id,callBack:function(t){if(d.a.post("http://localhost:8000/api/comments/new",t,{withCredentials:!0}).then((function(e){F.emit("createComment",e.data)})).catch((function(e){return console.log("Error: "+e)})),0!==t.rating)var c=s.numReviews+1,a=Number(s.rating)+Number(t.rating);var n=Object(l.a)(Object(l.a)({},s),{},{numReviews:c,rating:a});d.a.put("http://localhost:8000/api/products/"+e.id,n,{withCredentials:!0}).then((function(e){F.emit("updateProductReview",e.data)})).catch((function(e){return console.log("Error: "+e)}))},user:b,btn:"Say something"})]})});var V=function(){return Object(a.jsx)("div",{className:"App",children:Object(a.jsx)(_,{children:Object(a.jsxs)(u.c,{children:[Object(a.jsx)(u.b,{exact:!0,noThrow:!0,from:"/",to:"/products"}),Object(a.jsx)(O,{path:"/reg"}),Object(a.jsx)(A,{path:"/products"}),Object(a.jsx)(z,{path:"/products/:id"})]})})})},Y=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,232)).then((function(t){var c=t.getCLS,a=t.getFID,n=t.getFCP,s=t.getLCP,r=t.getTTFB;c(e),a(e),n(e),s(e),r(e)}))};r.a.render(Object(a.jsx)(V,{}),document.getElementById("root")),Y()}},[[178,1,2]]]);
//# sourceMappingURL=main.506b6afe.chunk.js.map